<div id="tweet">
  <div class="row">
    <div class="col-sm-8">
      <input v-model="newTweet" v-on:keyup.enter="addTweet" placeholder="new tweet" type="=text" class="form-control">
      <input v-model="userId" type="hidden" value="<%= @current_user.id %>">
      <input v-model="userAvatar" type="hidden" value="<%= @current_user.avatar.url %>">
    </div>

    <div class="col-sm-2">
      <button v-on:click="addTweet" class="btn btn-primary" type="button">tweet!</button>
    </div>
  </div>
  <br/>

  <div class="row tweet" v-for="tweet in tweets">

    <div class="col-sm-2">
      <a v-bind:href="tweet.user.user_url" class="link-user">
        <% temp = "{{tweet.user.avatar_url }}" %>
        <img class="avatar" v-bind:src="tweet.user.avatar_url">
      </a>
    </div>

    <div class="col-sm-10">
      <div class="row">
        <a v-bind:href="tweet.user.user_url" class="link-user">
         {{tweet.user.username}} - {{tweet.created_at}}
        </a>
      </div>

      <div class="row">
        <p>{{tweet.message}}</p>
      </div>

      <button v-on:click="writeComment(tweet)" class="btn btn-primary">write comment</button>
      <button v-on:click="showComment(tweet)" class="btn btn-primary">show comment</button>
      
      <div v-if="newComment == tweet.id">
        <input v-model="anotherTweet" v-on:keyup.enter="addComment(tweet)" placeholder="comment tweet" type="=text" class="form-control">
      </div>
      
      <div v-if="detail == tweet.id">
        <div class="row" v-for="comment in tweet.comment_tweet">
          <div class="col-sm-2">
          <a v-bind:href="comment.user.user_url" class="link-user">
            <% temp = "{{comment.user.avatar_url }}" %>
            <img class="avatar" v-bind:src="comment.user.avatar_url">
          </a>
        </div>

        <div class="col-sm-10">
          <div class="row">
            <a v-bind:href="comment.user.user_url" class="link-user">
             {{comment.user.username}} - {{comment.created_at}}
            </a>
          </div>

          <div class="row">
            <p>{{comment.message}}</p>
          </div>
        </div>
        <br>
      </div>
    </div>
    </div>
  </div>
</div>
